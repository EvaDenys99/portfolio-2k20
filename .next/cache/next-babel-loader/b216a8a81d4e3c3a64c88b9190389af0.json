{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction fetchAPI(_x) {\n  return _fetchAPI.apply(this, arguments);\n}\n\nfunction _fetchAPI() {\n  _fetchAPI = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(query) {\n    var _ref,\n        variables,\n        res,\n        json,\n        _args = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _ref = _args.length > 1 && _args[1] !== undefined ? _args[1] : {}, variables = _ref.variables;\n            _context.next = 3;\n            return fetch(\"\".concat(process.env.API_URL, \"/graphql\"), {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                query: query,\n                variables: variables\n              })\n            });\n\n          case 3:\n            res = _context.sent;\n            _context.next = 6;\n            return res.json();\n\n          case 6:\n            json = _context.sent;\n\n            if (!json.errors) {\n              _context.next = 10;\n              break;\n            }\n\n            console.error(json.errors);\n            throw new Error(\"Failed to fetch API\");\n\n          case 10:\n            return _context.abrupt(\"return\", json.data);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _fetchAPI.apply(this, arguments);\n}\n\nexport function getProjects() {\n  return _getProjects.apply(this, arguments);\n}\n\nfunction _getProjects() {\n  _getProjects = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var data;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return fetchAPI(\"query Projects {\\n        projects {\\n          id\\n          title\\n          creationDate\\n          headImage {\\n            url\\n          }\\n          categories {\\n            id\\n            name\\n          }\\n        }\\n      }\");\n\n          case 2:\n            data = _context2.sent;\n            return _context2.abrupt(\"return\", data.projects);\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _getProjects.apply(this, arguments);\n}\n\nexport function getCategories() {\n  return _getCategories.apply(this, arguments);\n}\n\nfunction _getCategories() {\n  _getCategories = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    var data;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return fetchAPI(\"query Categories {\\n      categories {\\n        id\\n        name\\n      }\\n    }\");\n\n          case 2:\n            data = _context3.sent;\n            return _context3.abrupt(\"return\", data.categories);\n\n          case 4:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _getCategories.apply(this, arguments);\n}\n\nexport function getCategoryProjects(_x2) {\n  return _getCategoryProjects.apply(this, arguments);\n}\n\nfunction _getCategoryProjects() {\n  _getCategoryProjects = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(id) {\n    var data;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return fetchAPI(\"query Category($id: ID!) {\\n        category(id: $id) {\\n          name\\n          projects {\\n            id\\n            title\\n            creationDate\\n            headImage {\\n              url\\n            }\\n            categories {\\n              id\\n              name\\n            }\\n          }\\n        }\\n      }\", {\n              variables: {\n                id: id\n              }\n            });\n\n          case 2:\n            data = _context4.sent;\n            return _context4.abrupt(\"return\", data.category.projects);\n\n          case 4:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _getCategoryProjects.apply(this, arguments);\n}","map":{"version":3,"sources":["/Users/evadenys/Desktop/portfolio/development/frontend/lib/api.js"],"names":["fetchAPI","query","variables","fetch","process","env","API_URL","method","headers","body","JSON","stringify","res","json","errors","console","error","Error","data","getProjects","projects","getCategories","categories","getCategoryProjects","id","category"],"mappings":";;;SAAeA,Q;;;;;uEAAf,iBAAwBC,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,2EAA+C,EAA/C,EAAiCC,SAAjC,QAAiCA,SAAjC;AAAA;AAAA,mBACoBC,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,OAAhB,eAAmC;AACxDC,cAAAA,MAAM,EAAE,MADgD;AAExDC,cAAAA,OAAO,EAAE;AACP,gCAAgB;AADT,eAF+C;AAKxDC,cAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBV,gBAAAA,KAAK,EAALA,KADmB;AAEnBC,gBAAAA,SAAS,EAATA;AAFmB,eAAf;AALkD,aAAnC,CADzB;;AAAA;AACQU,YAAAA,GADR;AAAA;AAAA,mBAYqBA,GAAG,CAACC,IAAJ,EAZrB;;AAAA;AAYQA,YAAAA,IAZR;;AAAA,iBAaMA,IAAI,CAACC,MAbX;AAAA;AAAA;AAAA;;AAcIC,YAAAA,OAAO,CAACC,KAAR,CAAcH,IAAI,CAACC,MAAnB;AAdJ,kBAeU,IAAIG,KAAJ,CAAU,qBAAV,CAfV;;AAAA;AAAA,6CAkBSJ,IAAI,CAACK,IAlBd;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAqBA,gBAAsBC,WAAtB;AAAA;AAAA;;;0EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACcnB,QAAQ,+OADtB;;AAAA;AACCkB,YAAAA,IADD;AAAA,8CAeEA,IAAI,CAACE,QAfP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAkBP,gBAAsBC,aAAtB;AAAA;AAAA;;;4EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACcrB,QAAQ,oFADtB;;AAAA;AACCkB,YAAAA,IADD;AAAA,8CAOEA,IAAI,CAACI,UAPP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAUP,gBAAsBC,mBAAtB;AAAA;AAAA;;;kFAAO,kBAAmCC,EAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACcxB,QAAQ,0UAkBzB;AAAEE,cAAAA,SAAS,EAAE;AAAEsB,gBAAAA,EAAE,EAAFA;AAAF;AAAb,aAlByB,CADtB;;AAAA;AACCN,YAAAA,IADD;AAAA,8CAqBEA,IAAI,CAACO,QAAL,CAAcL,QArBhB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["async function fetchAPI(query, { variables } = {}) {\n  const res = await fetch(`${process.env.API_URL}/graphql`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      query,\n      variables\n    })\n  });\n\n  const json = await res.json();\n  if (json.errors) {\n    console.error(json.errors);\n    throw new Error(\"Failed to fetch API\");\n  }\n\n  return json.data;\n}\n\nexport async function getProjects() {\n  const data = await fetchAPI(`query Projects {\n        projects {\n          id\n          title\n          creationDate\n          headImage {\n            url\n          }\n          categories {\n            id\n            name\n          }\n        }\n      }`);\n  return data.projects;\n}\n\nexport async function getCategories() {\n  const data = await fetchAPI(`query Categories {\n      categories {\n        id\n        name\n      }\n    }`);\n  return data.categories;\n}\n\nexport async function getCategoryProjects(id) {\n  const data = await fetchAPI(\n    `query Category($id: ID!) {\n        category(id: $id) {\n          name\n          projects {\n            id\n            title\n            creationDate\n            headImage {\n              url\n            }\n            categories {\n              id\n              name\n            }\n          }\n        }\n      }`,\n    { variables: { id } }\n  );\n  return data.category.projects;\n}\n"]},"metadata":{},"sourceType":"module"}